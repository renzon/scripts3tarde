{% extends 'produtos/produto_base.html' %}
{% block js %}
  <script type="application/javascript" src="/static/js/protutos.js">


  </script>
{% endblock %}
{% block body %}
  <div class="container">
    <div class="row">
      <div class="col-md-6 col-md-offset-3">
        <div class="well">
          <h3>Formul√°rio de Produto</h3>

          <form action="{{ salvar_path }}" method="post">
            {{ csrf_input() }}
            Categoria:
            {% macro select(nome) %}
              <select name="{{ nome }}">
                {% for cat in categorias %}
                  <option
                      value="{{ cat.key.id() }}" {{ 'selected="selected"' | safe if categoria_selecionada==cat }}> {{ cat.nome }}</option>
                {% endfor %}
              </select>
            {% endmacro %}
            {{ select('categoria') }}
            {{ form_input('Nome','nome','','') }}
            {{ form_input('Preco','preco','','') }}
            <button class="btn btn-success" type="submit">Salvar</button>
          </form>
          <button id="jq">Esconder/Mostrar</button>
          <button id="jq2">Remover</button>
        <input type="text" id="txt-input" /> <button id="enviar-btn">Enviar</button>
        <ul id="msg-ul">

        </ul>
          <div id="lista-div">
            <h3>Lista de Produtos {{ 'da categoria '+ categoria_selecionada.nome if categoria_selecionada }}</h3>

            <form action="{{ pesquisar_path }}">
              {{ select('categoria_selecionada') }}
              <button class="btn btn-primary" type="submit"><i class="glyphicon glyphicon-search"></i></button>
            </form>
            <ul>
              {% for prod in produtos %}
                <li>{{ prod.nome }} - {{ prod.preco }}</li>
              {% endfor %}
            </ul>
          </div>
        </div>

      </div>

    </div>

  </div>

{% endblock %}